<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <title>UPLCC</title>
    <style>
      * {
        margin: 0;
        padding: 0;
      }
      #inp {
        position: fixed;
        bottom: -20px;
        height: 100px;
        width: 100vw;
        left: 0;
        box-shadow: 10px 10px 10px 10px rgba(0,0,0,0.1);
        border-radius: 25px;
        background-color: rgba(0,0,0,0.02);
        border: 0;
      }
      #sr {
        position: absolute;
        z-index: 1;
        width: 100%;
        height: 80px;
        border: 0;
        border-radius: 25px;
        padding: 10px;
        box-sizing: border-box;
        outline: none;
        resize: none;
        box-shadow: none;
        background-color: rgba(0,0,0,0.005);
        font-family: sans-serif;
      }
      #ts {
        position: absolute;
        z-index: 2;
        width: 60px;
        height: 35px;
        right: 10px;
        bottom: 25px;
        border: 0px solid white;
        border-radius: 5px;
        background-color: #c5ecff;
      }
      .userx {
        position: relative;
        padding: 10px;
        margin: 10px;
        box-sizing: border-box;
        background-color: rgba(135,206,250,0.1);
        border-radius: 13px;
        min-width:40px;
        max-width: 80vw;
        margin-right: 5vw;
        margin-left:auto;
        width:fit-content;
      }
      .fs {
        position: relative;
        max-width: 85vw;
        min-width:10vw;
        margin-right:auto;
        width:fit-content;
        margin-left: 5vw;
        background-color: rgba(0,0,0,0.02);
        margin: 10px;
        padding: 10px;
        box-sizing: border-box;
        border-radius: 15px;
      }
      #xz {
        position: fixed;
        width: 100vw;
        overflow: auto;
      }
      .codea{
        position:relative;
        width:98%;
        background-color:rgba(0,0,0,0.05);
        border-radius:7px;
        padding:1%;
        overflow-x:auto;
      }
    </style>
  </head>
  <body>	
    <div id="xz">
    </div>
    <div id="inp">
      <textarea id="sr" placeholder="在这里输入问题..."></textarea>
      <button id="ts" onclick="if(eisif){give();eis();}">发送</button>
    </div>
    <script src="news.js"></script>
    <script src="hum.js"></script>
    <script>
      var ph, cx;
      const gxpx=100;
      var fh = "";
      const mb = [
        "的处理器是",
        "充电功率为",
        "电池容量为",
        "屏幕基材（或厂商）和分辨率和刷新率分别是"
      ];
      let gn = false;
      let sj = false;
      let maxl = 0;
      let past = 0;
      var mapa=new Map([
["SD 8 Elite Gen 5",0],["MTK 9500",0],["APPLE A19 Pro",0],["APPLE A19 Pro UC",0],["APPLE A19",0],["SD 8 Elite",0],["XRING O1",0],["APPLE A18 Pro",0],["MTK 9400+",0],["MTK 9400",0],["APPLE A18",0],["APPLE A17 Pro",0],["APPLE A18 UC",0],["SD 8 Gen 3",0],
["MTK 9300+",0],["MTK 9400e",0],["MTK 9300",0],["SD 8 Gen 2",0],["APPLE A16",0],["MTK 9200+",0],["MTK 9200",0],["SD 888+",0],["SD 888",0],["SD 870",0]
]);
let ind=mapa.size;
for(var key of mapa.keys()){
mapa.set(key,ind);
ind--;
}
      document.addEventListener("resize", () => {
        xz.style.height = window.innerHeight - sr.offsetHeight + "px";
      });
      setInterval(() => {
        xz.style.height = window.innerHeight - sr.offsetHeight + "px";
      }, 200);
      function give() {
        if (!sr.value.trim()) {
          return;
        }
        addUserMessage(sr.value);
        gn = false;
        sj = false;
        maxl = 0;
        cx = 0;
        ph = 0;
        const t = sr.value.toLowerCase().replace(/[\s]+/gi, "").trim();
        if (sr.value == "随便说一个") {
          const ra = Math.round(Math.random() * (a.length - 0.5));
          const rb = Math.round(Math.random() * 3);
          hd(`${a[ra].split(";")[0]}${mb[rb]}${a[ra].split(";")[rb+1]}。`);
          return;
        }
        for (var r = 0; r < a.length; r++) {
          const aliases = a[r].split(";")[5].split(",");
          for (var alias of aliases) {
            if (p(alias, t)) {
              if (maxl < alias.length) {
                maxl = alias.length;
                ph = r + 1;
                past = ph;
                sj = true;
              }
            }
          }
        }
        if (past !== 0 && p("呢", t) || p("他", t) || p("她", t) || p("它", t) || p("这", t)) {
          ph = Number(past);
          sj = true;
        }
        if(p("比",t)||p("哪个",t)){
          db();
          return;
        }
        if(!sj&&p("你好",t)||p("哈喽",t)||p("哈咯",t)||p("hello",t)){
          hd("你好！");
          return;
        }
        if(!sj&&p("作者",t)||p("开发者",t)){
          hd("这个工具的开发者是UPLCC，回答结果仅供参考。");
          return;
        }
        if(!sj&&p("全部数据",t)){
          var codeaaa="";
          for(var sjaaa=0;sjaaa<a.length;sjaaa++){
            if(sjaaa!==a.length-1){
            codeaaa+=`"`+a[sjaaa]+`",`+`
`;
            }else{
            codeaaa+=`"`+a[sjaaa]+`"`+`
`;
            }
          }
          hd(`以下为本工具的全部手机数据，发现不对的数据可以指正~<br><div class="codea"><pre>var a=[
${codeaaa}];</pre></div>`);
          return;
        }
        if(!sj&&p("帧率",t)||p("fps",t)||p("屏幕刷新率",t)){
          !iffps?hd("正在测量中..."):hd("你点的次数太多了。");
          fpsnow(fnow=>hd("当前屏幕刷新率(仅供参考)："+fnow+"FPS。"));
          return;
        }
        if (!sj) {
          pe();
          return;
        }
        if (p("电池", t)) {
          dd("电池容量", 3);
          gn = true;
        }
        if (p("处理器", t) || p("soc", t) || p("芯片", t) || p("cpu", t) || p("gpu", t)) {
          dd("处理器", 1);
          gn = true;
        }
        if (p("充电", t) || p("功率", t)) {
          dd("充电功率", 2);
          gn = true;
        }
        if (p("基材", t) || p("屏幕", t)) {
          dd("屏幕基本信息", 4);
          gn = true;
        }
        if (!gn) {
          all();
        }
      }
function db() {
    const input = sr.value.trim().toLowerCase().replace(/[\s]+/g, " ");
    const rows = [];
    const socdb=[];
    for (let r = 0; r < a.length; r++) {
        const aliases = a[r].split(";")[5].split(",");
        let bestLen = 0;
        for (let al of aliases) {
            const re = new RegExp(`(^|[^a-z0-9])${al}([^a-z0-9]|$)`, 'i');
            if (p(al,input)&&re.test(input) && al.length > bestLen) {
                bestLen = al.length;
            }
        }
        if (bestLen) rows.push(r);
    }
if(rows.length<2){
hd(`对比最低需要2款机型，还需要至少${2-rows.length}个机型才能进行对比哦！`);
return;
}
for(let aaa=0;aaa<rows.length;aaa++){
socdb.push(Number(mapa.get(a[rows[aaa]].split(";")[1])));
}
var dx=0;
var sy=0;
var dxdc=0,sydc=0;
var dxsd=0,sysd=0;
for(var aac=0;aac<socdb.length;aac++){
if(socdb[aac]>dx){
dx=socdb[aac];
sy=rows[aac];
}
if(Number(a[rows[aac]].split(";")[3].replace(/[a-z\s]+/gi,""))>Number(dxdc)){
dxdc=Number(a[rows[aac]].split(";")[3].replace(/[a-z\s]+/gi,""));
sydc=rows[aac];
}
if(Number(a[rows[aac]].split(";")[2].replace(/[a-z\s]+/gi,""))>Number(dxsd)){
dxsd=Number(a[rows[aac]].split(";")[2].replace(/[a-z\s]+/gi,""));
sysd=rows[aac];
}
}
hd(`<h3>处理器：${a[sy].split(";")[0]}</h3>
${a[sy].split(";")[0]}的处理器(${a[sy].split(";")[1]})相较于其他机型更好。
<h3>电池：${a[sydc].split(";")[0]}</h3>
${a[sydc].split(";")[0]}的电池容量(${a[sydc].split(";")[3]})相较于其他机型更高。
<h3>充电功率：${a[sysd].split(";")[0]}</h3>
${a[sysd].split(";")[0]}的充电功率(${a[sysd].split(";")[2]})相较于其他机型更高。
`);
}
      function pe(){
        const areaText=sr.value.toLowerCase().trim();
        let ifhu=false;
        var maxlen=0;
        var maxsyaaa=0;
        for (var huma = 0; huma < hu.length; huma++) {
          const al = hu[huma].split(";")[2].split(",");
          for (var ali of al) {
            if (p(ali, areaText)) {
              if(ali.length > maxlen){
                maxlen=ali.length;
                maxsyaaa=huma;
              }
              ifhu=true;
            }
          }
        }
        if(ifhu){
          hd(`<h3>${hu[maxsyaaa].split(";")[0]}</h3>${hu[maxsyaaa].split(";")[1]}。`);
        }
        if(!ifhu){
          hd("这条命令还没有学习。");
        }
      }
      function p(value, t) {
        return t.includes(value);
      }
      function addUserMessage(message) {
        const userMsgDiv = document.createElement('div');
        userMsgDiv.className = 'userx';
        userMsgDiv.textContent = message;
        xz.appendChild(userMsgDiv);
        if(xz.scrollHeight - xz.scrollTop - xz.clientHeight < gxpx)gx();
      }
      function hd(str) {
        const botMsgDiv = document.createElement('div');
        botMsgDiv.className = 'fs';
        xz.appendChild(botMsgDiv);
        typeWriter(botMsgDiv, str, 0, 10);
      }
      function typeWriter(element, text, index, speed) {
        if (index < text.length) {
          element.innerHTML = text.substring(0, index);
          setTimeout(() => typeWriter(element, text, index + 1, speed), speed);
        } else {
          element.innerHTML = text;
        }
        if(xz.scrollHeight - xz.scrollTop - xz.clientHeight < gxpx)gx();
      }
      function dd(str, num) {
        const aa = a[ph-1].split(";");
        hd(`${aa[0]}的${str}是${aa[num]}。`);
      }
      function all() {
        const aa = a[ph-1].split(";");
        let fullText = aa[0];
        for (var j = 1; j <= mb.length; ++j) {
          fullText += mb[j-1] + aa[j];
          if (j == mb.length) {
            fullText += "。";
          } else {
            fullText += "，";
          }
        }
        hd(fullText);
      }
      function gx() {
        const box = document.getElementById("xz");
        box.scrollTo({
          top: box.scrollHeight,
          behavior: 'smooth'
        });
      }
      let fpssz=0;
      let iffps=false;
      function fps(){
        if(iffps){
          requestAnimationFrame(fps);
          fpssz++;
        }
      }
      function fpsnow(cb){
        if(iffps)return;
        iffps=true;
        fps();
        setTimeout(()=>{
          cb(fpssz);
          fpssz=0;
          iffps=false;
        },1000);
      }
      let eisif=true;
      function eis(){
        if(eisif){
          eisif=false;
          setTimeout(()=>{eisif=true;},500);
        }else{
          return;
        }
      }
    </script>
  </body>
</html>